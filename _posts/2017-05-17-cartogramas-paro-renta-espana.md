---
title: Los mapas no cuentan (toda) la verdad
date: 2017-05-17 00:00:00 +02:00
categories:
- visualizacion_de_datos
layout: post
subtitle: Hay muchas maneras de visualizar datos geográficos. Aquí proponemos unas
  cuantas más.
author: Martín González
---

<div class="column_c">

  Cada tres meses escuchamos en el telediario la nueva tasa de desempleo. Esa misma mañana los medios suelen publicar mapas y gráficos de barras junto al análisis económico. Y aunque los mapas que publican suelen ser técnicamente correctos, la geografía esconde otras variables que nos pueden ayudar a entender mejor esta cifra.

</div>

<div class="min_full_wide m_v_3">

  <div class="js-map">
    <h2 class="g-headline center">Mapa de la última EPA</h2>
  </div>
  <div class="js-cartogram">
    <h2 class="g-headline center">Cartograma escalado por población</h2>
  </div>

</div>

<div class="column_c">

  El problema surge al comparar las regiones. Comunidades más extensas como Castilla y León parecen más importantes al ojo debido a su tamaño, aunque éste no tenga nada que ver con la variable que estemos pintando.

  Uno de los métodos más populares para contrarrestar este sesgo son los <a href="https://es.wikipedia.org/wiki/Cartograma">cartogramas</a>. En este ejemplo cada cuadrado es una comunidad autónoma pero su tamaño está escalado de acuerdo con la población. Así es más sencillo ver qué regiones son más relevantes desde el punto de vista demográfico.

  El problema con este tipo de gráficos es la pérdida de la referencia geográfica. Existen varios tipos de cartogramas (<a href="http://prag.ma/code/d3-cartogram/#popest/2010">contiguos</a>, de <a href="https://mbostock.github.io/protovis/ex/cartogram.html">círculos</a>), y cada uno de ellos intenta establecer un balance diferente entre fidelidad geográfica y estadística.

  <h2 class="center">Visualizando la renta provincial</h2>

  Aquí, el mismo ejercicio, pero con los últimos datos de la renta por provincias. A medida que tenemos más regiones en el cartograma se vuelve más fácil percibir la geografía, haciéndolo más efectivo.

  La población se concentra sobre todo en Madrid y Barcelona. Andalucía también está muy poblada, pero está más distribuida por provincias. Los datos de la <a href="http://www.agenciatributaria.es/AEAT.internet/datosabiertos/catalogo/hacienda/Estadistica_de_los_declarantes_del_IRPF_por_municipios.shtml">Agencia Tributaria</a> no incluyen País Vasco ni Navarra.

</div>

<div class="js-income-provinces m_v_3"></div>

<div class="column_c">

  <h2 class="center">Los picos y valles de la renta española</h2>

  Por último, y más como un experimento, he visualizado la renta a nivel municipal con triángulos. Un pico más alto significa mayores ingresos brutos, un valle, menos. Los triángulos azules tienen una renta superior a la media (24.106€), los rojos, inferior (sólo se incluyen los que tienen más de mil habitantes).

  Hay concentraciones de picos alrededor de las de capitales de provincia, y valles en la zona sur, donde la renta es menor. Las ciudades suelen tener más oportunidades laborales y por tanto en ellas se concentra mayor riqueza.

</div>

<div class="min_full_wide m_v_3">

  <div class="center ">
    <p style="padding-bottom: 0.25rem;"><strong>Renta municipal bruta</strong></p>
    <p style="text-transform: uppercase; font-size: 0.85rem;"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="auto" viewBox="0 0 78 94"><g fill="none" fill-rule="evenodd" stroke="steelblue" stroke-width="15" transform="translate(1 2)" stroke-linecap="square"><path d="M.5 90.5L36.5.5M37 0L75.1837662 89.0954544"/></g></svg> Superior a la media <svg style="padding-left: 0.5rem" xmlns="http://www.w3.org/2000/svg" width="8" height="auto" viewBox="0 0 78 94"> <g fill="none" fill-rule="evenodd" stroke="#8B0000" stroke-width="15" transform="rotate(-180 38.5 46)" stroke-linecap="square"><path d="M.5 90.5L36.5.5M37 0L75.1837662 89.0954544"/></g></svg> Inferior a la media</p>
  </div>

  <div id='g-breakpoints-box' class='ai2html' style="padding-bottom: 1rem">
  	<!-- Generated by ai2html v0.64 - 2017-05-17 - 23:25 -->
  	<!-- ai file: breakpoints -->

  	<style type='text/css' media='screen,print'>
  		.g-artboard {
  			margin:0 auto;
  		}
      article img {
        border: none;
      }
  	</style>


  	<!-- Artboard: wide -->
  	<div id='g-breakpoints-wide' class='g-artboard g-artboard-v3 ' data-min-width='960'>
  		<style type='text/css' media='screen,print'>
  			#g-breakpoints-wide{
  				position:relative;
  				overflow:hidden;
  				width:960px;
  			}
  			.g-aiAbs{
  				position:absolute;
  			}
  			.g-aiImg{
  				display:block;
  				width:100% !important;
  			}
  			#g-breakpoints-wide p{
  				font-family:'Source Sans Pro',arial,helvetica,sans-serif;
  				font-size:13px;
  				line-height:18px;
  				margin:0;
  			}
  			#g-breakpoints-wide .g-aiPstyle0 {
  				font-size:15px;
  				text-align:center;
  				color:#ffffff;
          text-shadow:1px 1px 0 #111, -1px -1px 0 #111, 1px -1px 0 #111, -1px 1px 0 #111;
  			}
  			.g-aiPtransformed p { white-space: nowrap; }
  		</style>
  		<div id='g-breakpoints-wide-graphic'>
        {% asset 'ai2html/breakpoints-wide.png' id:"g-ai0-0" class:"g-aiImg" %}
  			<div id='g-ai0-1' class='g-Layer_1 g-aiAbs' style='top:1.2863%;left:56.914%;width:7.6219%;margin-left:-3.8109%;'>
  				<p class='g-aiPstyle0'>Santander</p>
  			</div>
  			<div id='g-ai0-2' class='g-Layer_1 g-aiAbs' style='top:19.8668%;left:92.6934%;width:7.6219%;margin-left:-3.8109%;'>
  				<p class='g-aiPstyle0'>Barcelona</p>
  			</div>
  			<div id='g-ai0-3' class='g-Layer_1 g-aiAbs' style='top:26.0126%;left:57.7827%;width:5.0015%;margin-left:-2.5007%;'>
  				<p class='g-aiPstyle0'>Madrid</p>
  			</div>
  			<div id='g-ai0-4' class='g-Layer_1 g-aiAbs' style='top:38.4472%;left:79.6455%;width:7.6219%;margin-left:-3.8109%;'>
  				<p class='g-aiPstyle0'>Valencia</p>
  			</div>
  			<div id='g-ai0-5' class='g-Layer_1 g-aiAbs' style='top:57.8852%;left:45.0151%;width:7.6219%;margin-left:-3.8109%;'>
  				<p class='g-aiPstyle0'>Sevilla</p>
  			</div>
  		</div>
  	</div>

  	<!-- Artboard: medium -->
  	<div id='g-breakpoints-medium' class='g-artboard g-artboard-v3 ' data-min-width='420' data-max-width='959'>
  		<style type='text/css' media='screen,print'>
  			#g-breakpoints-medium{
  				position:relative;
  				overflow:hidden;
  				width:600px;
  			}
  			.g-aiAbs{
  				position:absolute;
  			}
  			.g-aiImg{
  				display:block;
  				width:100% !important;
  			}
  			#g-breakpoints-medium p{
  				font-family:'Source Sans Pro',arial,helvetica,sans-serif;
  				font-size:13px;
  				line-height:18px;
  				margin:0;
  			}
  			#g-breakpoints-medium .g-aiPstyle0 {
  				font-size:15px;
  				line-height:19px;
  				text-align:center;
  				color:#ffffff;
          text-shadow:1px 1px 0 #111, -1px -1px 0 #111, 1px -1px 0 #111, -1px 1px 0 #111;
  			}
  			#g-breakpoints-medium .g-aiPstyle1 {
  				font-family:arial,helvetica,sans-serif;
  				font-size:62px;
  				line-height:74px;
  				font-weight:bold;
  				text-align:center;
  				filter: alpha(opacity=50);
  				-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=50)';
  				opacity:0.5;
  				color:#97c7dd;
  			}
  			.g-aiPtransformed p { white-space: nowrap; }
  		</style>
  		<div id='g-breakpoints-medium-graphic'>
        {% asset 'ai2html/breakpoints-medium.png' id:"g-ai1-0" class:"g-aiImg" %}

  			<div id='g-ai1-1' class='g-Layer_1 g-aiAbs' style='top:1.2527%;left:56.6883%;width:12.5843%;margin-left:-6.2922%;'>
  				<p class='g-aiPstyle0'>Santander</p>
  			</div>
  			<div id='g-ai1-2' class='g-Layer_1 g-aiAbs' style='top:20.294%;left:92.9802%;width:12.5843%;margin-left:-6.2922%;'>
  				<p class='g-aiPstyle0'>Barcelona</p>
  			</div>
  			<div id='g-ai1-3' class='g-Layer_1 g-aiAbs' style='top:24.5532%;left:56.6883%;width:8.2579%;margin-left:-4.1289%;'>
  				<p class='g-aiPstyle0'>Madrid</p>
  			</div>
  			<div id='g-ai1-5' class='g-Layer_1 g-aiAbs' style='top:38.8342%;left:79.4575%;width:12.5843%;margin-left:-6.2922%;'>
  				<p class='g-aiPstyle0'>Valencia</p>
  			</div>
  			<div id='g-ai1-6' class='g-Layer_1 g-aiAbs' style='top:56.6228%;left:45.3187%;width:12.5843%;margin-left:-6.2922%;'>
  				<p class='g-aiPstyle0'>Sevilla</p>
  			</div>
  		</div>
  	</div>

  	<!-- Artboard: small -->
  	<div id='g-breakpoints-small' class='g-artboard g-artboard-v3 ' data-min-width='250' data-max-width='419'>
  		<style type='text/css' media='screen,print'>
  			#g-breakpoints-small{
  				position:relative;
  				overflow:hidden;
  				width:300px;
  			}
  			.g-aiAbs{
  				position:absolute;
  			}
  			.g-aiImg{
  				display:block;
  				width:100% !important;
  			}
  			#g-breakpoints-small p{
  				font-family:'Source Sans Pro',arial,helvetica,sans-serif;
  				font-size:13px;
  				line-height:18px;
  				margin:0;
  			}
  			#g-breakpoints-small .g-aiPstyle0 {
  				font-size:11px;
  				line-height:13px;
  				text-align:center;
  				color:#ffffff;
          text-shadow:1px 1px 0 #111, -1px -1px 0 #111, 1px -1px 0 #111, -1px 1px 0 #111;
  			}
  			.g-aiPtransformed p { white-space: nowrap; }
  		</style>
  		<div id='g-breakpoints-small-graphic'>
        {% asset 'ai2html/breakpoints-small.png' id:"g-ai2-0" class:"g-aiImg" %}
  			<div id='g-ai2-1' class='g-Layer_1 g-aiAbs' style='top:13.9582%;left:83.7611%;width:16.5157%;margin-left:-8.2579%;'>
  				<p class='g-aiPstyle0'>Barcelona</p>
  			</div>
  			<div id='g-ai2-2' class='g-Layer_1 g-aiAbs' style='top:24.6595%;left:56.887%;width:16.5157%;margin-left:-8.2579%;'>
  				<p class='g-aiPstyle0'>Madrid</p>
  			</div>
  		</div>
  	</div>


  	<!-- End ai2html - 2017-05-17 - 23:25 -->
  </div>

</div>

<div class="separator blue short"></div>

<div class="column_c">

  <p>Como nota final, incluiremos estos gráficos en el <a href="/blog/20170425-gobierto-indicadores.html">módulo de indicadores</a> de Gobierto. Los datos los he extraído con Populate Data, una base de datos abiertos que lanzaremos próximamente. Si te interesa, escríbenos a <a href="mailto:lets@populate.tools">lets@populate.tools</a>.</p>

  <blockquote>
    Fuentes: INE, Agencia Tributaria.
  </blockquote>

</div>




<style>
.js-income-provinces {
  max-width: 960px;
  margin: 0 auto;
}
.triangles {
  fill: none;
  stroke-width: 1.4;
  opacity: 0.5;
  mix-blend-mode: multiply;
}
.red {
  opacity: 0.25;
}
.blue {
  opacity: 0.65;
}
.g-headline {
  margin-top: 0.5em;
}
.border {
  fill: none;
  stroke-width: 0.3;
  stroke: rgba(255,255,255,.5)
}
.js-places-map .border {
  fill: none;
  stroke: #878787
}
.js-places-map .nation {
  fill: #f5f5f5;
  stroke: black;
  stroke-width: 0.5;
}
.js-map .nation {
  fill: none;
  stroke: black;
  stroke-width: 0.5;
}
.city {
  font-size: 0.95rem;
}
.legend {
  font-size: 0.85rem;
}
.legend-title {
  text-transform: uppercase;
  font-size: 0.75rem;
}
@media (min-width: 1200px) {
  .js-cartogram,
  .js-map {
    display: inline-block;
    width: 49%;
  }
}

</style>

<script type="text/javascript">
    (function() {
        // only want one resizer on the page
        if (document.documentElement.className.indexOf("g-resizer-v3-init") > -1) return;
        document.documentElement.className += " g-resizer-v3-init";
        // require IE9+
        if (!("querySelector" in document)) return;
        function resizer() {
            var elements = Array.prototype.slice.call(document.querySelectorAll(".g-artboard[data-min-width]")),
                widthById = {};
            elements.forEach(function(el) {
                var parent = el.parentNode,
                    width = widthById[parent.id] || parent.getBoundingClientRect().width,
                    minwidth = el.getAttribute("data-min-width"),
                    maxwidth = el.getAttribute("data-max-width");
                widthById[parent.id] = width;

                if (+minwidth <= width && (+maxwidth >= width || maxwidth === null)) {
                    el.style.display = "block";
                } else {
                    el.style.display = "none";
                }
            });
            try {
                if (window.parent && window.parent.$) {
                    window.parent.$("body").trigger("resizedcontent", [window]);
                }
                if (window.require) {
                    require(['foundation/main'], function() {
                        require(['shared/interactive/instances/app-communicator'], function(AppCommunicator) {
                            AppCommunicator.triggerResize();
                        });
                    });
                }
            } catch(e) { console.log(e); }
        }

        document.addEventListener('DOMContentLoaded', resizer);
        // feel free to replace throttle with _.throttle, if available
        window.addEventListener('resize', throttle(resizer, 200));        

        function throttle(func, wait) {
            // from underscore.js
            var _now = Date.now || function() { return new Date().getTime(); },
                context, args, result, timeout = null, previous = 0;
            var later = function() {
                previous = _now();
                timeout = null;
                result = func.apply(context, args);
                if (!timeout) context = args = null;
            };
            return function() {
                var now = _now(), remaining = wait - (now - previous);
                context = this;
                args = arguments;
                if (remaining <= 0 || remaining > wait) {
                    if (timeout) {
                        clearTimeout(timeout);
                        timeout = null;
                    }
                    previous = now;
                    result = func.apply(context, args);
                    if (!timeout) context = args = null;
                } else if (!timeout && options.trailing !== false) {
                    timeout = setTimeout(later, remaining);
                }
                return result;
            };
        }


    })();
</script>
